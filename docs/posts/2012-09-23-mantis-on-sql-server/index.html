<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Mantis on SQL Server | Gonzalo&#39;s thoughts</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1" />
    <meta
      name="description"
      content="[Technical post]
I&#39;ve been busy last couple of days trying to make Mantis work with a Microsoft SQL Server database on a Windows Server 2003. Many people would ask why to use MSSQL instead of Mysql, a much better DBMS, not mention the OS election. I&#39;m not planning to enter in a flame war. I wanted a free bug tracking system that worked with MSSQL. Candidates were Bugzilla, with higly experimental MSSQL support, BugTracker ."
    />
    <meta name="generator" content="Hugo 0.80.0" />

    <meta name="ROBOTS" content="INDEX, FOLLOW" />

    <link
      rel="stylesheet"
      href="/ananke/dist/main.css_5c99d70a7725bacd4c701e995b969fea.css"
    />

    <meta property="og:title" content="Mantis on SQL Server" />
    <meta
      property="og:description"
      content="[Technical post]
I&#39;ve been busy last couple of days trying to make Mantis work with a Microsoft SQL Server database on a Windows Server 2003. Many people would ask why to use MSSQL instead of Mysql, a much better DBMS, not mention the OS election. I&#39;m not planning to enter in a flame war. I wanted a free bug tracking system that worked with MSSQL. Candidates were Bugzilla, with higly experimental MSSQL support, BugTracker ."
    />
    <meta property="og:type" content="article" />
    <meta
      property="og:url"
      content="http://gonzalo.f-v.es/posts/2012-09-23-mantis-on-sql-server/"
    />
    <meta property="og:site_name" content="Gonzalo&#39;s thoughts" />
    <meta itemprop="name" content="Mantis on SQL Server" />
    <meta
      itemprop="description"
      content="[Technical post]
I&#39;ve been busy last couple of days trying to make Mantis work with a Microsoft SQL Server database on a Windows Server 2003. Many people would ask why to use MSSQL instead of Mysql, a much better DBMS, not mention the OS election. I&#39;m not planning to enter in a flame war. I wanted a free bug tracking system that worked with MSSQL. Candidates were Bugzilla, with higly experimental MSSQL support, BugTracker ."
    />

    <meta itemprop="wordCount" content="2411" />

    <meta itemprop="keywords" content="" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Mantis on SQL Server" />
    <meta
      name="twitter:description"
      content="[Technical post]
I&#39;ve been busy last couple of days trying to make Mantis work with a Microsoft SQL Server database on a Windows Server 2003. Many people would ask why to use MSSQL instead of Mysql, a much better DBMS, not mention the OS election. I&#39;m not planning to enter in a flame war. I wanted a free bug tracking system that worked with MSSQL. Candidates were Bugzilla, with higly experimental MSSQL support, BugTracker ."
    />

    <link rel="stylesheet" href="/css/main.css" />
  </head>

  <body class="ma0 avenir bg-near-white">
    <header>
      <div class="bg-black">
        <nav class="pv3 ph3 ph4-ns" role="navigation">
          <div class="flex-l justify-between items-center center">
            <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
              Gonzalo&#39;s thoughts
            </a>
            <div class="flex-l items-center">
              <a
                href="https://twitter.com/gonfva"
                target="_blank"
                class="link-transition twitter link dib z-999 pt3 pt0-l mr1"
                title="Twitter link"
                rel="noopener"
                aria-label="follow on Twitter——Opens in a new window"
              >
                <svg
                  height="32px"
                  style="enable-background: new 0 0 67 67"
                  version="1.1"
                  viewBox="0 0 67 67"
                  width="32px"
                  xml:space="preserve"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                >
                  <path
                    d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z"
                    style="fill-rule: evenodd; clip-rule: evenodd; fill: "
                  />
                </svg>

                <span class="new-window"
                  ><svg
                    height="8px"
                    style="enable-background: new 0 0 1000 1000"
                    version="1.1"
                    viewBox="0 0 1000 1000"
                    width="8px"
                    xml:space="preserve"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                  >
                    <path
                      d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z"
                      style="fill-rule: evenodd; clip-rule: evenodd; fill: "
                    />
                  </svg> </span
              ></a>

              <a
                href="https://www.linkedin.com/in/gonzalofernandezvictorio/"
                target="_blank"
                class="link-transition linkedin link dib z-999 pt3 pt0-l mr1"
                title="LinkedIn link"
                rel="noopener"
                aria-label="follow on LinkedIn——Opens in a new window"
              >
                <svg
                  height="32px"
                  style="enable-background: new 0 0 65 65"
                  version="1.1"
                  viewBox="0 0 65 65"
                  width="32px"
                  xml:space="preserve"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                >
                  <path
                    d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z"
                    style="fill-rule: evenodd; clip-rule: evenodd; fill: "
                  />
                </svg>

                <span class="new-window"
                  ><svg
                    height="8px"
                    style="enable-background: new 0 0 1000 1000"
                    version="1.1"
                    viewBox="0 0 1000 1000"
                    width="8px"
                    xml:space="preserve"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                  >
                    <path
                      d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z"
                      style="fill-rule: evenodd; clip-rule: evenodd; fill: "
                    />
                  </svg> </span
              ></a>
            </div>
          </div>
        </nav>
      </div>
    </header>

    <main class="pb7" role="main">
      <article class="flex-l flex-wrap justify-between mw8 center ph3">
        <header class="mt4 w-100">
          <aside class="instapaper_ignoref b helvetica tracked">POSTS</aside>

          <div id="sharing" class="mt3">
            <a
              href="https://www.facebook.com/sharer.php?u=http://gonzalo.f-v.es/posts/2012-09-23-mantis-on-sql-server/"
              class="facebook no-underline"
              aria-label="share on Facebook"
            >
              <svg
                height="32px"
                style="enable-background: new 0 0 67 67"
                version="1.1"
                viewBox="0 0 67 67"
                width="32px"
                xml:space="preserve"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
              >
                <path
                  d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z"
                  style="fill-rule: evenodd; clip-rule: evenodd"
                />
              </svg>
            </a>

            <a
              href="https://twitter.com/share?url=http://gonzalo.f-v.es/posts/2012-09-23-mantis-on-sql-server/&amp;text=Mantis%20on%20SQL%20Server"
              class="twitter no-underline"
              aria-label="share on Twitter"
            >
              <svg
                height="32px"
                style="enable-background: new 0 0 67 67"
                version="1.1"
                viewBox="0 0 67 67"
                width="32px"
                xml:space="preserve"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
              >
                <path
                  d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z"
                  style="fill-rule: evenodd; clip-rule: evenodd; fill: "
                />
              </svg>
            </a>

            <a
              href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http://gonzalo.f-v.es/posts/2012-09-23-mantis-on-sql-server/&amp;title=Mantis%20on%20SQL%20Server"
              class="linkedin no-underline"
              aria-label="share on LinkedIn"
            >
              <svg
                height="32px"
                style="enable-background: new 0 0 65 65"
                version="1.1"
                viewBox="0 0 65 65"
                width="32px"
                xml:space="preserve"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
              >
                <path
                  d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z"
                  style="fill-rule: evenodd; clip-rule: evenodd; fill: "
                />
              </svg>
            </a>
          </div>

          <h1 class="f1 athelas mt3 mb1">Mantis on SQL Server</h1>

          <time class="f6 mv4 dib tracked" datetime="0001-01-01T00:00:00Z"
            >January 1, 0001</time
          >
        </header>
        <div
          class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"
        >
          [Technical post]<br />I've been busy last couple of days trying to
          make <a href="http://www.mantisbt.org/">Mantis</a> work with a
          Microsoft SQL Server database on a Windows Server 2003. Many people
          would ask why to use MSSQL instead of Mysql, a much better DBMS, not
          mention the OS election. I'm not planning to enter in a flame war. I
          wanted a free bug tracking system that worked with MSSQL. Candidates
          were Bugzilla, with
          <a href="http://www.zplace.com/">higly experimental MSSQL support</a>,
          <a href="http://ifdefined.com/bugtrackernet.html">BugTracker .NET</a>,
          much settled on the platform but looking a bit amateur, and Mantis,
          the final election, which promised MSSQL support. The fact is that it
          hasn't been a trivial task for me. I'm a Java (former VB.NET)
          developer, and I've had to fight a lot. Just in case someone else has
          the same problems, here I write what I've done [edited] to install
          <span style="font-weight: bold">Mantis 1.2.0</span>:<br />
          <ul>
            <li>
              <b>Install PHP</b>. Some tricks here.
              <span style="font-style: italic">First</span>. Use PHP 5.2. PHP
              5.3 needs other configuration.
              <span style="font-style: italic">Second</span>. I installed in IIS
              as an ISAPI filter. <span style="font-style: italic">Third</span>.
              Install MSSQL extension in the PHP installation.
              <span style="font-style: italic">Fourth</span>. You need
              <a href="http://www.dlldll.com/ntwdblib.dll_download.html"
                >ntwdblib.dll</a
              >
              in ...\system32 folder.
            </li>
            <br />
            <li>
              <b
                >Unzip Mantis <span style="font-weight: bold">1.2.0</span> and
                install as a new virtual project.</b
              >
            </li>
            <br />
            <li>
              <b>Link PHP with IIS:</b>No tricks here. I followed
              <a
                href="http://www.desarrolloweb.com/articulos/instalando-php-con-iis.html"
                >this post in Spanish</a
              >.
            </li>
            <br />
            <li>
              <b>Create de Mantis SQL schema:</b> The installation procedure of
              Mantis creates the original database (of an ancient version of
              Mantis) and in the same script upgrades the tables. I don't know
              the reason why it doesn't work in MSSQL but the fact is
              <a
                href="http://www.mantisbt.org/forums/viewtopic.php?f=3&amp;t=9920"
                >it doesn't work</a
              >. So you have to create the SQL schema on hand. Here is my
              script:<br />
              <blockquote>
                CREATE TABLE mantis_config_table (<br />config_id VARCHAR(64)
                NOT NULL,<br />project_id INT DEFAULT 0 NOT NULL,<br />user_id
                INT DEFAULT 0 NOT NULL,<br />access_reqd INT DEFAULT 0,<br />type
                INT DEFAULT 90,<br />value TEXT NOT NULL,<br />PRIMARY KEY
                (config_id, project_id, user_id)<br />); CREATE INDEX idx_config
                ON mantis_config_table (config_id); CREATE TABLE
                mantis_bug_file_table (<br />id INT IDENTITY(1,1) NOT NULL,<br />bug_id
                INT DEFAULT 0 NOT NULL,<br />title VARCHAR(250) DEFAULT '' NOT
                NULL,<br />description VARCHAR(250) DEFAULT '' NOT NULL,<br />diskfile
                VARCHAR(250) DEFAULT '' NOT NULL,<br />filename VARCHAR(250)
                DEFAULT '' NOT NULL,<br />folder VARCHAR(250) DEFAULT '' NOT
                NULL,<br />filesize INT DEFAULT 0 NOT NULL,<br />file_type
                VARCHAR(250) DEFAULT '' NOT NULL,<br />date_added INT DEFAULT 1
                NOT NULL,<br />content IMAGE NOT NULL,<br />PRIMARY KEY (id)<br />);
                CREATE INDEX idx_bug_file_bug_id ON mantis_bug_file_table
                (bug_id); ALTER TABLE mantis_bug_file_table ADD<br />user_id INT
                DEFAULT 0 NOT NULL;

                <br />CREATE TABLE mantis_bug_history_table (<br />id INT
                IDENTITY(1,1) NOT NULL,<br />user_id INT DEFAULT 0 NOT NULL,<br />bug_id
                INT DEFAULT 0 NOT NULL,<br />date_modified INT DEFAULT 1 NOT
                NULL,<br />field_name VARCHAR(32) DEFAULT '' NOT NULL,<br />old_value
                VARCHAR(128) DEFAULT '' NOT NULL,<br />new_value VARCHAR(128)
                DEFAULT '' NOT NULL,<br />type SMALLINT DEFAULT 0 NOT NULL,<br />PRIMARY
                KEY (id)<br />); CREATE INDEX idx_bug_history_bug_id ON
                mantis_bug_history_table (bug_id); CREATE INDEX
                idx_history_user_id ON mantis_bug_history_table (user_id);
                CREATE TABLE mantis_bug_monitor_table (<br />user_id INT DEFAULT
                0 NOT NULL,<br />bug_id INT DEFAULT 0 NOT NULL,<br />PRIMARY KEY
                (user_id, bug_id)<br />); CREATE TABLE
                mantis_bug_relationship_table (<br />id INT IDENTITY(1,1) NOT
                NULL,<br />source_bug_id INT DEFAULT 0 NOT NULL,<br />destination_bug_id
                INT DEFAULT 0 NOT NULL,<br />relationship_type SMALLINT DEFAULT
                0 NOT NULL,<br />PRIMARY KEY (id)<br />); CREATE INDEX
                idx_relationship_source ON mantis_bug_relationship_table
                (source_bug_id); CREATE INDEX idx_relationship_destination ON
                mantis_bug_relationship_table (destination_bug_id); CREATE TABLE
                mantis_bug_table (<br />id INT IDENTITY(1,1) NOT NULL,<br />project_id
                INT DEFAULT 0 NOT NULL,<br />reporter_id INT DEFAULT 0 NOT
                NULL,<br />handler_id INT DEFAULT 0 NOT NULL,<br />duplicate_id
                INT DEFAULT 0 NOT NULL,<br />priority SMALLINT DEFAULT 30 NOT
                NULL,<br />severity SMALLINT DEFAULT 50 NOT NULL,<br />reproducibility
                SMALLINT DEFAULT 10 NOT NULL,<br />status SMALLINT DEFAULT 10
                NOT NULL,<br />resolution SMALLINT DEFAULT 10 NOT NULL,<br />projection
                SMALLINT DEFAULT 10 NOT NULL,<br />eta SMALLINT DEFAULT 10 NOT
                NULL,<br />bug_text_id INT DEFAULT 0 NOT NULL,<br />os
                VARCHAR(32) DEFAULT '' NOT NULL,<br />os_build VARCHAR(32)
                DEFAULT '' NOT NULL,<br />platform VARCHAR(32) DEFAULT '' NOT
                NULL,<br />version VARCHAR(64) DEFAULT '' NOT NULL,<br />fixed_in_version
                VARCHAR(64) DEFAULT '' NOT NULL,<br />build VARCHAR(32) DEFAULT
                '' NOT NULL,<br />profile_id INT DEFAULT 0 NOT NULL,<br />view_state
                SMALLINT DEFAULT 10 NOT NULL,<br />summary VARCHAR(128) DEFAULT
                '' NOT NULL,<br />sponsorship_total INT DEFAULT 0 NOT NULL,<br />sticky
                BIT DEFAULT '0' NOT NULL,<br />due_date INT DEFAULT 1 NOT
                NULL,<br />date_submitted INT DEFAULT 1 NOT NULL,<br />last_updated
                INT DEFAULT 1 NOT NULL,<br />category_id INT DEFAULT 1 NOT
                NULL,<br />PRIMARY KEY (id)<br />); CREATE INDEX
                idx_bug_sponsorship_total ON mantis_bug_table
                (sponsorship_total); CREATE INDEX idx_bug_fixed_in_version ON
                mantis_bug_table (fixed_in_version); CREATE INDEX idx_bug_status
                ON mantis_bug_table (status); CREATE INDEX idx_project ON
                mantis_bug_table (project_id);

                <br />CREATE TABLE mantis_bug_text_table (<br />id INT
                IDENTITY(1,1) NOT NULL,<br />description TEXT NOT NULL,<br />steps_to_reproduce
                TEXT NOT NULL,<br />additional_information TEXT NOT NULL,<br />PRIMARY
                KEY (id)<br />); CREATE TABLE mantis_bugnote_table (<br />id INT
                IDENTITY(1,1) NOT NULL,<br />bug_id INT DEFAULT 0 NOT NULL,<br />reporter_id
                INT DEFAULT 0 NOT NULL,<br />bugnote_text_id INT DEFAULT 0 NOT
                NULL,<br />view_state SMALLINT DEFAULT 10 NOT NULL,<br />date_submitted
                INT DEFAULT 1 NOT NULL,<br />last_modified INT DEFAULT 1 NOT
                NULL,<br />note_type INT DEFAULT 0,<br />note_attr VARCHAR(250)
                DEFAULT '',<br />PRIMARY KEY (id)<br />); CREATE INDEX idx_bug
                ON mantis_bugnote_table (bug_id); CREATE INDEX idx_last_mod ON
                mantis_bugnote_table (last_modified); CREATE TABLE
                mantis_bugnote_text_table (<br />id INT IDENTITY(1,1) NOT
                NULL,<br />note TEXT NOT NULL,<br />PRIMARY KEY (id)<br />);
                CREATE TABLE mantis_custom_field_project_table (<br />field_id
                INT DEFAULT 0 NOT NULL,<br />project_id INT DEFAULT 0 NOT
                NULL,<br />sequence SMALLINT DEFAULT 0 NOT NULL,<br />PRIMARY
                KEY (field_id, project_id)<br />); CREATE TABLE
                mantis_custom_field_string_table (<br />field_id INT DEFAULT 0
                NOT NULL,<br />bug_id INT DEFAULT 0 NOT NULL,<br />value
                VARCHAR(255) DEFAULT '' NOT NULL,<br />PRIMARY KEY (field_id,
                bug_id)<br />); CREATE INDEX idx_custom_field_bug ON
                mantis_custom_field_string_table (bug_id); CREATE TABLE
                mantis_custom_field_table (<br />id INT IDENTITY(1,1) NOT
                NULL,<br />name VARCHAR(64) DEFAULT '' NOT NULL,<br />type
                SMALLINT DEFAULT 0 NOT NULL,<br />possible_values TEXT DEFAULT
                '' NOT NULL,<br />default_value VARCHAR(255) DEFAULT '' NOT
                NULL,<br />valid_regexp VARCHAR(255) DEFAULT '' NOT NULL,<br />access_level_r
                SMALLINT DEFAULT 0 NOT NULL,<br />access_level_rw SMALLINT
                DEFAULT 0 NOT NULL,<br />length_min INT DEFAULT 0 NOT NULL,<br />length_max
                INT DEFAULT 0 NOT NULL,<br />require_report BIT DEFAULT '0' NOT
                NULL,<br />require_update BIT DEFAULT '0' NOT NULL,<br />display_report
                BIT DEFAULT '0' NOT NULL,<br />display_update BIT DEFAULT '1'
                NOT NULL,<br />require_resolved BIT DEFAULT '0' NOT NULL,<br />display_resolved
                BIT DEFAULT '0' NOT NULL,<br />display_closed BIT DEFAULT '0'
                NOT NULL,<br />require_closed BIT DEFAULT '0' NOT NULL,<br />PRIMARY
                KEY (id)<br />); CREATE INDEX idx_custom_field_name ON
                mantis_custom_field_table (name); ALTER TABLE
                mantis_custom_field_table ADD<br />filter_by BIT DEFAULT '1' NOT
                NULL; CREATE TABLE mantis_filters_table (<br />id INT
                IDENTITY(1,1) NOT NULL,<br />user_id INT DEFAULT 0 NOT NULL,<br />project_id
                INT DEFAULT 0 NOT NULL,<br />is_public BIT DEFAULT NULL,<br />name
                VARCHAR(64) DEFAULT '' NOT NULL,<br />filter_string TEXT NOT
                NULL,<br />PRIMARY KEY (id)<br />); CREATE TABLE
                mantis_news_table (<br />id INT IDENTITY(1,1) NOT NULL,<br />project_id
                INT DEFAULT 0 NOT NULL,<br />poster_id INT DEFAULT 0 NOT
                NULL,<br />date_posted INT DEFAULT 1 NOT NULL,<br />last_modified
                INT DEFAULT 1 NOT NULL,<br />view_state SMALLINT DEFAULT 10 NOT
                NULL,<br />announcement BIT DEFAULT '0' NOT NULL,<br />headline
                VARCHAR(64) DEFAULT '' NOT NULL,<br />body TEXT NOT NULL,<br />PRIMARY
                KEY (id)<br />); CREATE TABLE mantis_project_category_table (<br />project_id
                INT DEFAULT 0 NOT NULL,<br />category VARCHAR(64) DEFAULT '' NOT
                NULL,<br />user_id INT DEFAULT 0 NOT NULL,<br />PRIMARY KEY
                (project_id, category)<br />); CREATE TABLE
                mantis_project_file_table (<br />id INT IDENTITY(1,1) NOT
                NULL,<br />project_id INT DEFAULT 0 NOT NULL,<br />title
                VARCHAR(250) DEFAULT '' NOT NULL,<br />description VARCHAR(250)
                DEFAULT '' NOT NULL,<br />diskfile VARCHAR(250) DEFAULT '' NOT
                NULL,<br />filename VARCHAR(250) DEFAULT '' NOT NULL,<br />folder
                VARCHAR(250) DEFAULT '' NOT NULL,<br />filesize INT DEFAULT 0
                NOT NULL,<br />file_type VARCHAR(250) DEFAULT '' NOT NULL,<br />date_added
                INT DEFAULT 1 NOT NULL,<br />content IMAGE NOT NULL,<br />PRIMARY
                KEY (id)<br />); ALTER TABLE mantis_project_file_table ADD<br />user_id
                INT DEFAULT 0 NOT NULL; CREATE TABLE
                mantis_project_hierarchy_table (<br />child_id INT NOT NULL,<br />parent_id
                INT NOT NULL<br />); CREATE TABLE mantis_project_table (<br />id
                INT IDENTITY(1,1) NOT NULL,<br />name VARCHAR(128) DEFAULT ''
                NOT NULL,<br />status SMALLINT DEFAULT 10 NOT NULL,<br />enabled
                BIT DEFAULT '1' NOT NULL,<br />view_state SMALLINT DEFAULT 10
                NOT NULL,<br />access_min SMALLINT DEFAULT 10 NOT NULL,<br />file_path
                VARCHAR(250) DEFAULT '' NOT NULL,<br />description TEXT NOT
                NULL,<br />PRIMARY KEY (id)<br />); CREATE INDEX idx_project_id
                ON mantis_project_table (id); CREATE UNIQUE INDEX
                idx_project_name ON mantis_project_table (name); CREATE INDEX
                idx_project_view ON mantis_project_table (view_state); CREATE
                TABLE mantis_project_user_list_table (<br />project_id INT
                DEFAULT 0 NOT NULL,<br />user_id INT DEFAULT 0 NOT NULL,<br />access_level
                SMALLINT DEFAULT 10 NOT NULL,<br />PRIMARY KEY (project_id,
                user_id)<br />); CREATE INDEX idx_project_user ON
                mantis_project_user_list_table (user_id); CREATE TABLE
                mantis_project_version_table (<br />id INT IDENTITY(1,1) NOT
                NULL,<br />project_id INT DEFAULT 0 NOT NULL,<br />version
                VARCHAR(64) DEFAULT '' NOT NULL,<br />date_order INT DEFAULT 1
                NOT NULL,<br />description TEXT NOT NULL,<br />released BIT
                DEFAULT '1' NOT NULL,<br />PRIMARY KEY (id)<br />); CREATE
                UNIQUE INDEX idx_project_version ON mantis_project_version_table
                (project_id, version); CREATE TABLE mantis_sponsorship_table
                (<br />id INT IDENTITY(1,1) NOT NULL,<br />bug_id INT DEFAULT 0
                NOT NULL,<br />user_id INT DEFAULT 0 NOT NULL,<br />amount INT
                DEFAULT 0 NOT NULL,<br />logo VARCHAR(128) DEFAULT '' NOT
                NULL,<br />url VARCHAR(128) DEFAULT '' NOT NULL,<br />paid BIT
                DEFAULT '0' NOT NULL,<br />date_submitted INT DEFAULT 1 NOT
                NULL,<br />last_updated INT DEFAULT 1 NOT NULL,<br />PRIMARY KEY
                (id)<br />); CREATE INDEX idx_sponsorship_bug_id ON
                mantis_sponsorship_table (bug_id); CREATE INDEX
                idx_sponsorship_user_id ON mantis_sponsorship_table (user_id);
                CREATE TABLE mantis_tokens_table (<br />id INT IDENTITY(1,1) NOT
                NULL,<br />owner INT NOT NULL,<br />type INT NOT NULL,<br />timestamp
                INT DEFAULT 1 NOT NULL,<br />expiry INT DEFAULT 1 NOT NULL,<br />value
                TEXT NOT NULL,<br />PRIMARY KEY (id)<br />); CREATE TABLE
                mantis_user_pref_table (<br />id INT IDENTITY(1,1) NOT NULL,<br />user_id
                INT DEFAULT 0 NOT NULL,<br />project_id INT DEFAULT 0 NOT
                NULL,<br />default_profile INT DEFAULT 0 NOT NULL,<br />default_project
                INT DEFAULT 0 NOT NULL,<br />refresh_delay INT DEFAULT 0 NOT
                NULL,<br />redirect_delay INT DEFAULT 0 NOT NULL,<br />bugnote_order
                VARCHAR(4) DEFAULT 'ASC' NOT NULL,<br />email_on_new BIT DEFAULT
                '0' NOT NULL,<br />email_on_assigned BIT DEFAULT '0' NOT
                NULL,<br />email_on_feedback BIT DEFAULT '0' NOT NULL,<br />email_on_resolved
                BIT DEFAULT '0' NOT NULL,<br />email_on_closed BIT DEFAULT '0'
                NOT NULL,<br />email_on_reopened BIT DEFAULT '0' NOT NULL,<br />email_on_bugnote
                BIT DEFAULT '0' NOT NULL,<br />email_on_status BIT DEFAULT '0'
                NOT NULL,<br />email_on_priority BIT DEFAULT '0' NOT NULL,<br />email_on_priority_min_severity
                SMALLINT DEFAULT 10 NOT NULL,<br />email_on_status_min_severity
                SMALLINT DEFAULT 10 NOT NULL,<br />email_on_bugnote_min_severity
                SMALLINT DEFAULT 10 NOT NULL,<br />email_on_reopened_min_severity
                SMALLINT DEFAULT 10 NOT NULL,<br />email_on_closed_min_severity
                SMALLINT DEFAULT 10 NOT NULL,<br />email_on_resolved_min_severity
                SMALLINT DEFAULT 10 NOT NULL,<br />email_on_feedback_min_severity
                SMALLINT DEFAULT 10 NOT NULL,<br />email_on_assigned_min_severity
                SMALLINT DEFAULT 10 NOT NULL,<br />email_on_new_min_severity
                SMALLINT DEFAULT 10 NOT NULL,<br />email_bugnote_limit SMALLINT
                DEFAULT 0 NOT NULL,<br />language VARCHAR(32) DEFAULT 'english'
                NOT NULL,<br />PRIMARY KEY (id)<br />); ALTER TABLE
                mantis_user_pref_table ADD<br />timezone VARCHAR(32) DEFAULT ''
                NOT NULL; CREATE TABLE mantis_user_print_pref_table (<br />user_id
                INT DEFAULT 0 NOT NULL,<br />print_pref VARCHAR(27) DEFAULT ''
                NOT NULL,<br />PRIMARY KEY (user_id)<br />); CREATE TABLE
                mantis_user_profile_table (<br />id INT IDENTITY(1,1) NOT
                NULL,<br />user_id INT DEFAULT 0 NOT NULL,<br />platform
                VARCHAR(32) DEFAULT '' NOT NULL,<br />os VARCHAR(32) DEFAULT ''
                NOT NULL,<br />os_build VARCHAR(32) DEFAULT '' NOT NULL,<br />description
                TEXT NOT NULL,<br />PRIMARY KEY (id)<br />); CREATE TABLE
                mantis_user_table (<br />id INT IDENTITY(1,1) NOT NULL,<br />username
                VARCHAR(32) DEFAULT '' NOT NULL,<br />realname VARCHAR(64)
                DEFAULT '' NOT NULL,<br />email VARCHAR(64) DEFAULT '' NOT
                NULL,<br />password VARCHAR(32) DEFAULT '' NOT NULL,<br />date_created
                INT DEFAULT 1 NOT NULL,<br />last_visit INT DEFAULT 1 NOT
                NULL,<br />enabled BIT DEFAULT '1' NOT NULL,<br />protected BIT
                DEFAULT '0' NOT NULL,<br />access_level SMALLINT DEFAULT 10 NOT
                NULL,<br />login_count INT DEFAULT 0 NOT NULL,<br />lost_password_request_count
                SMALLINT DEFAULT 0 NOT NULL,<br />failed_login_count SMALLINT
                DEFAULT 0 NOT NULL,<br />cookie_string VARCHAR(64) DEFAULT ''
                NOT NULL,<br />PRIMARY KEY (id)<br />); CREATE UNIQUE INDEX
                idx_user_cookie_string ON mantis_user_table (cookie_string);
                CREATE UNIQUE INDEX idx_user_username ON mantis_user_table
                (username); CREATE INDEX idx_enable ON mantis_user_table
                (enabled); CREATE INDEX idx_access ON mantis_user_table
                (access_level); INSERT INTO mantis_user_table(username,
                realname, email, password, date_created, last_visit, enabled,
                protected, access_level, login_count,
                lost_password_request_count, failed_login_count, cookie_string)
                VALUES<br />('administrator', '', 'root@localhost',
                '63a9f0ea7bb98050796b649e85481845', 1, 1, '1', '0', 90, 3, 0, 0,
                '43c90a58b766eca71a4eaec08120f1b51fec152d8f4d2c0cfec26390ed94f575');
                ALTER TABLE mantis_bug_history_table ALTER COLUMN old_value
                VARCHAR(255) NOT NULL; ALTER TABLE mantis_bug_history_table
                ALTER COLUMN new_value VARCHAR(255) NOT NULL; CREATE TABLE
                mantis_email_table (<br />email_id INT IDENTITY(1,1) NOT
                NULL,<br />email VARCHAR(64) DEFAULT '' NOT NULL,<br />subject
                VARCHAR(250) DEFAULT '' NOT NULL,<br />submitted INT DEFAULT 1
                NOT NULL,<br />metadata TEXT NOT NULL,<br />body TEXT NOT
                NULL,<br />PRIMARY KEY (email_id)<br />); CREATE INDEX
                idx_email_id ON mantis_email_table (email_id); ALTER TABLE
                mantis_bug_table ADD<br />target_version VARCHAR(64) DEFAULT ''
                NOT NULL; ALTER TABLE mantis_bugnote_table ADD<br />time_tracking
                INT DEFAULT 0 NOT NULL; CREATE INDEX idx_diskfile ON
                mantis_bug_file_table (diskfile); ALTER TABLE
                mantis_user_print_pref_table ALTER COLUMN print_pref VARCHAR(64)
                NOT NULL; ALTER TABLE mantis_bug_history_table ALTER COLUMN
                field_name VARCHAR(64) NOT NULL; CREATE TABLE mantis_tag_table
                (<br />id INT IDENTITY(1,1) NOT NULL,<br />user_id INT DEFAULT 0
                NOT NULL,<br />name VARCHAR(100) DEFAULT '' NOT NULL,<br />description
                TEXT NOT NULL,<br />date_created INT DEFAULT 1 NOT NULL,<br />date_updated
                INT DEFAULT 1 NOT NULL,<br />PRIMARY KEY (id, name)<br />);
                CREATE TABLE mantis_bug_tag_table (<br />bug_id INT DEFAULT 0
                NOT NULL,<br />tag_id INT DEFAULT 0 NOT NULL,<br />user_id INT
                DEFAULT 0 NOT NULL,<br />date_attached INT DEFAULT 1 NOT
                NULL,<br />PRIMARY KEY (bug_id, tag_id)<br />); CREATE INDEX
                idx_typeowner ON mantis_tokens_table (type, owner); CREATE TABLE
                mantis_plugin_table (<br />basename VARCHAR(40) NOT NULL,<br />enabled
                BIT DEFAULT '0' NOT NULL,<br />PRIMARY KEY (basename)<br />);

                <br />CREATE TABLE mantis_category_table (<br />id INT
                IDENTITY(1,1) NOT NULL,<br />project_id INT DEFAULT 0 NOT
                NULL,<br />user_id INT DEFAULT 0 NOT NULL,<br />name
                VARCHAR(128) DEFAULT '' NOT NULL,<br />status INT DEFAULT 0 NOT
                NULL,<br />PRIMARY KEY (id)<br />); CREATE UNIQUE INDEX
                idx_category_project_name ON mantis_category_table (project_id,
                name); INSERT INTO mantis_category_table<br />( project_id,
                user_id, name, status ) VALUES<br />( '0', '0', 'General', '0' )
                ;

                <br />DROP TABLE mantis_project_category_table; ALTER TABLE
                mantis_project_table ADD<br />category_id INT DEFAULT 1 NOT
                NULL; INSERT INTO mantis_plugin_table<br />( basename, enabled )
                VALUES<br />( 'MantisCoreFormatting', '1' ); ALTER TABLE
                mantis_project_table ADD<br />inherit_global INT DEFAULT 0 NOT
                NULL; ALTER TABLE mantis_project_hierarchy_table ADD<br />inherit_parent
                INT DEFAULT 0 NOT NULL; ALTER TABLE mantis_plugin_table ADD<br />protected
                BIT DEFAULT '0' NOT NULL, <br />priority INT DEFAULT 3 NOT NULL;
                ALTER TABLE mantis_project_version_table ADD<br />obsolete BIT
                DEFAULT '0' NOT NULL; CREATE TABLE mantis_bug_revision_table
                (<br />id INT IDENTITY(1,1) NOT NULL,<br />bug_id INT NOT
                NULL,<br />bugnote_id INT DEFAULT 0 NOT NULL,<br />user_id INT
                NOT NULL,<br />timestamp INT DEFAULT 1 NOT NULL,<br />type INT
                NOT NULL,<br />value TEXT NOT NULL,<br />PRIMARY KEY (id)<br />);
                CREATE INDEX idx_bug_rev_id_time ON mantis_bug_revision_table
                (bug_id, timestamp); CREATE INDEX idx_bug_rev_type ON
                mantis_bug_revision_table (type); CREATE INDEX
                idx_project_hierarchy_child_id ON mantis_project_hierarchy_table
                (child_id); CREATE INDEX idx_project_hierarchy_parent_id ON
                mantis_project_hierarchy_table (parent_id); CREATE INDEX
                idx_tag_name ON mantis_tag_table (name); CREATE INDEX
                idx_bug_tag_tag_id ON mantis_bug_tag_table (tag_id); INSERT INTO
                mantis_config_table ( value, type, access_reqd, config_id,
                project_id, user_id ) VALUES ('182', 1, 90, 'database_version',
                0, 0 );
              </blockquote>
            </li>
            <br />
            <li>
              <b>Create a config_inc.php file:</b> No tricks here. You have to
              enter database connection data. Mine is more complicated but I
              guess something like this could do the trick:<br />
              <blockquote>
                &lt;?php<br />$g_hostname = '***';<br />$g_db_type = 'mssql';<br />$g_database_name
                = '***';<br />$g_db_username = '***';<br />$g_db_password =
                '***';<br />?&gt;
              </blockquote>
            </li>
            <br />
            <li>
              <b>The final trick:</b> Don't ask me why (and don't ask me how I
              discovered), but the fact is that you have to edit the file
              ...\library\adodb\adodb.inc.php, and change the sentence
              <blockquote>define('ADODB_FETCH_ASSOC',2);</blockquote>
              to
              <blockquote>define('ADODB_FETCH_ASSOC',0);</blockquote>
            </li>
          </ul>
          <ul class="pa0"></ul>
          <div class="mt6 instapaper_ignoref"></div>
        </div>

        <aside class="w-30-l mt6-l"></aside>
      </article>
    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
      <div class="flex justify-between">
        <a
          class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3"
          href="http://gonzalo.f-v.es/"
        >
          &copy; Gonzalo Fernandez-Victorio 2021
        </a>
        <div>
          <a
            href="https://twitter.com/gonfva"
            target="_blank"
            class="link-transition twitter link dib z-999 pt3 pt0-l mr1"
            title="Twitter link"
            rel="noopener"
            aria-label="follow on Twitter——Opens in a new window"
          >
            <svg
              height="32px"
              style="enable-background: new 0 0 67 67"
              version="1.1"
              viewBox="0 0 67 67"
              width="32px"
              xml:space="preserve"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <path
                d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z"
                style="fill-rule: evenodd; clip-rule: evenodd; fill: "
              />
            </svg>

            <span class="new-window"
              ><svg
                height="8px"
                style="enable-background: new 0 0 1000 1000"
                version="1.1"
                viewBox="0 0 1000 1000"
                width="8px"
                xml:space="preserve"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
              >
                <path
                  d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z"
                  style="fill-rule: evenodd; clip-rule: evenodd; fill: "
                />
              </svg> </span
          ></a>

          <a
            href="https://www.linkedin.com/in/gonzalofernandezvictorio/"
            target="_blank"
            class="link-transition linkedin link dib z-999 pt3 pt0-l mr1"
            title="LinkedIn link"
            rel="noopener"
            aria-label="follow on LinkedIn——Opens in a new window"
          >
            <svg
              height="32px"
              style="enable-background: new 0 0 65 65"
              version="1.1"
              viewBox="0 0 65 65"
              width="32px"
              xml:space="preserve"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <path
                d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z"
                style="fill-rule: evenodd; clip-rule: evenodd; fill: "
              />
            </svg>

            <span class="new-window"
              ><svg
                height="8px"
                style="enable-background: new 0 0 1000 1000"
                version="1.1"
                viewBox="0 0 1000 1000"
                width="8px"
                xml:space="preserve"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
              >
                <path
                  d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z"
                  style="fill-rule: evenodd; clip-rule: evenodd; fill: "
                />
              </svg> </span
          ></a>
        </div>
      </div>
    </footer>
  </body>
</html>
