<!DOCTYPE html>
<html lang="en">

<head>
  <title>Python 3.11 in Ubuntu Xenial 16.04 | Gonzalo&#39;s thoughts</title>

  <meta charset="UTF-8">
  <meta name="language" content="en">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="canonical" href="https://gonzalo.f-v.es/blog/2024-02-10-python-3-11-ubuntu-xenial/" itemprop="url" />
  
  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Python 3.11 in Ubuntu Xenial 16.04" />
  <meta name="twitter:description" content=""/>
  <meta name="twitter:site" content="@gonfva" />
  <meta name="twitter:creator" content="https://twitter.com/gonfva" />
  

  <link rel="shortcut icon" type="image/png" href="/favicon.ico" />


  
  
    
 
  
  

  

  
    
    <link type="text/css" rel="stylesheet" href="/css/post.min.86d1effd4c412b85ac13db53a90c473a0f256f789b821e131125c9aa25cb6a6d.css" integrity="sha256-htHv/UxBK4WsE9tTqQxHOg8lb3ibgh4TESXJqiXLam0="/>
  
    
    <link type="text/css" rel="stylesheet" href="/css/custom.min.03388d93892841d2abbb40edb2280f0c8ea5b756cfea16fe7c9b72bc9780bde9.css" integrity="sha256-AziNk4koQdKru0DtsigPDI6lt1bP6hb&#43;fJtyvJeAvek="/>
  

  
   
    

<script type="application/ld+json">
  
    {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/gonzalo.f-v.es\/"
      },
      "articleSection" : "blog",
      "name" : "Python 3.11 in Ubuntu Xenial 16.04",
      "headline" : "Python 3.11 in Ubuntu Xenial 16.04",
      "description" : "",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "2024",
      "datePublished": "2024-02-10 10:30:00 \u002b0000 UTC",
      "dateModified" : "2024-02-10 10:30:00 \u002b0000 UTC",
      "url" : "https:\/\/gonzalo.f-v.es\/blog\/2024-02-10-python-3-11-ubuntu-xenial\/",
      "wordCount" : "759",
      "keywords" : ["Blog"]
    }
  
  </script>
</head>

<body>
  <div class="burger__container">
  <div class="burger" aria-controls="navigation" aria-label="Menu">
    <div class="burger__meat burger__meat--1"></div>
    <div class="burger__meat burger__meat--2"></div>
    <div class="burger__meat burger__meat--3"></div>
  </div>
</div>


  <nav class="nav" id="navigation">
  <ul class="nav__list">
    
    
      <li>
        <a  href="/">About</a>
      </li>
    
      <li>
        <a  href="/blog">Blog EN</a>
      </li>
    
      <li>
        <a  href="/es/blog">Blog ES</a>
      </li>
    
  </ul>
</nav>


  <main>
    
    

    <div class="flex-wrapper">
      <div class="post__container">
        <div class="post">
          <header class="post__header">
            <h1 id="post__title">Python 3.11 in Ubuntu Xenial 16.04</h1>
            
            <h2>Reviving an old AWS Deeplens</h2>
            
            <time datetime="2024-02-10 10:30:00 &#43;0000 UTC" class="post__date">2024-02-10</time> 
          </header>
          <article class="post__content">
              
<h2 id="deeplens-is-it-dead">Deeplens, is it dead?<a class="anchor" href="#deeplens-is-it-dead">#</a></h2>
<p>I&rsquo;ve got a Deeplens. It was a gift that I received when I left my previous company. I played with it for a while when I got it.</p>
<p>But I must confess never much. Yes, I know. It is a shame. Moreover, I&rsquo;m interested in ML and AI, so this should have been the perfect gift.</p>
<p>Anyway, last year, Amazon <a href="https://aws.amazon.com/deeplens/faqs/" 
  
   target="_blank" rel="noreferrer noopener" 
>announced</a> that it was retiring everything related to Deeplens.</p>
<blockquote>
<p>After January 31, 2024, all references to AWS DeepLens models, projects, and device information are deleted from the AWS DeepLens service. You can no longer discover or access the AWS DeepLens service from your AWS console and applications that call the AWS DeepLens API no longer work.</p>
</blockquote>
<p>The device has been inside a drawer for a while, but a few days ago I decided I should give it an opportunity. It is not a very powerful device, but maybe it could act as a tiny Internet server (low power consumption) for a project I&rsquo;ve got in mind. I&rsquo;ve got a USB ethernet adapter, so I don&rsquo;t need the wifi which is said to be unreliable.</p>
<p>The device runs Ubuntu Xenial 16.04, with <a href="https://repost.aws/questions/QUj7PugVYbS3OraD9bhZuZdw/deeplens-ubuntu-20-04" 
  
   target="_blank" rel="noreferrer noopener" 
>no possibility to upgrade to a more recent distribution</a>.</p>
<p>I thought that was the end of my idea.</p>
<p>Xenial was launched in April 2016: 8 years ago.</p>
<p>It turns out there are still <a href="https://wiki.ubuntu.com/Releases" 
  
   target="_blank" rel="noreferrer noopener" 
>security updates, and end of life is April 2026</a>!!!! That&rsquo;s amazing!!!!</p>
<p>So I managed to update it.</p>
<p>And I thought &ldquo;I can live with whatever is there, as long as it is security updated. Can I?&rdquo;</p>
<p>It turns out I couldn&rsquo;t.</p>
<pre><code>$ python3
Python 3.5.2 (default, Nov 12 2018, 13:43:14) 
[GCC 5.4.0 20160609] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; quit()
</code></pre>
<p>Damn it, <strong>python3.5</strong>. That&rsquo;s ancient.</p>
<p>I want to use Django. I needed <a href="https://docs.djangoproject.com/en/5.0/faq/install/" 
  
   target="_blank" rel="noreferrer noopener" 
>at least Python 3.8, preferably 3.10 for Django 5</a>. Yes, I knew I could probably get away with docker. But this machine is already restricted as it is, I would prefer to not use containers.</p>
<p>Let&rsquo;s get some help from Google.</p>
<p>Hmm. This <code>dadsnakes/ppa</code> looked promising &hellip; <a href="https://gist.github.com/ptantiku/aca8d955296d5dee01bd9ed1c3027d8c" 
  
   target="_blank" rel="noreferrer noopener" 
>until I discovered 16.04 is no longer supported</a>.</p>
<p>Is this a new dead end?</p>
<p>Could I install python from source?</p>
<h2 id="installation-from-source">Installation from source<a class="anchor" href="#installation-from-source">#</a></h2>
<p>Well, it turns out you can install python from source. But you need to install a few packages first.</p>
<p>First, <strong>OpenSSL v1.1.1</strong>. The version installed in the system is 1.0.2g, not good enough for Python 3.11. You need 1.1.1.</p>
<p>I went for building openssl from source as well. Here a recipe to install Openssl 1.1.1w</p>
<pre><code>cd /tmp
wget https://github.com/openssl/openssl/releases/download/OpenSSL_1_1_1w/openssl-1.1.1w.tar.gz
tar -xvf openssl-1.1.1w.tar.gz 
cd openssl-1.1.1w/
./config shared
make
sudo make install
</code></pre>
<p>It seems for python we also need the source. I discovered this too late, and I didn&rsquo;t want to recompile, so I did the following:</p>
<pre><code>sudo mv /tmp/openssl-1.1.1w /usr/src/
cd /usr/src/openssl-1.1.1w
mkdir lib
cp ./*.{so,so.*,a,pc} ./lib
</code></pre>
<p>OK. openssl done.</p>
<p>Next, you will also need <strong>sqlite development library</strong> (libsqlite3-dev).</p>
<p>Here there is a misconfiguration in the packages (<code>libsqlite3-dev : Depends: libsqlite3-0 (= 3.11.0-1ubuntu1) but 3.11.0-1ubuntu1.1 is to be installed</code> ), dev requires almost the same version, so I just hacked my way out. Not ideal, but sue me:</p>
<pre><code>wget http://launchpadlibrarian.net/241463272/libsqlite3-0_3.11.0-1ubuntu1_amd64.deb
wget http://launchpadlibrarian.net/241463275/libsqlite3-dev_3.11.0-1ubuntu1_amd64.deb
sudo apt install ./libsqlite3-0_3.11.0-1ubuntu1_amd64.deb
sudo apt install ./libsqlite3-dev_3.11.0-1ubuntu1_amd64.deb
</code></pre>
<p>And you may also need a few extra packages. But those are provided in the distribution repos</p>
<pre><code>sudo apt install libffi-dev tk-dev libgdbm-dev libc6-dev libbz2-dev libreadline-gplv2-dev libncursesw5-dev uuid-dev
</code></pre>
<p>Small mention required for tk-dev and tkinter. I thought tk-dev would be enough, but I was getting missing</p>
<pre><code>checking for stdlib extension module _tkinter... missing
</code></pre>
<p>It turns out passing environment variables when building python (see below) seem to fix the issue.</p>
<p>OK. You&rsquo;ve done all the pre-requisites. Funnily enough they are not <em>hard pre-requisites</em>. They won&rsquo;t crash the compilation. They will just appear as a bunch of things like <code>Could not build the ssl module!</code> and <code>fatal error: ffi.h: No such file or directory</code> in the logs but the process will keep working without those modules. However, you need those modules.</p>
<p>After the pre-requisites, the recipe for <strong>python 3.11</strong> itself.</p>
<pre><code>cd /tmp
wget https://www.python.org/ftp/python/3.11.8/Python-3.11.8.tgz
tar -xvf Python-3.11.8.tgz
cd Python-3.11.8/
export TCLTK_CFLAGS=-I/usr/include/tcl8.6
export TCLTK_LIBS=&quot;-ltcl8.6 -ltk8.6&quot;
./configure --with-openssl=/usr/src/openssl-1.1.1w --enable-optimizations
make
sudo make install
</code></pre>
<p>And yes, python 3.11 on Ubuntu Xenial.</p>
<pre><code>$ python3 --version
Python 3.11.8
</code></pre>
<pre><code>$ pip3 --version
pip 24.0 from /usr/local/lib/python3.11/site-packages/pip (python 3.11)
</code></pre>
<p>Remember that when installing from source, you&rsquo;re responsible of updating when a new version appears (there is no package manager for them),</p>
<p>I hope this helps. Please ping me if there is anything missing.</p>


              
          </article>
          

          

<ul class="tags__list">
    
    <li class="tag__item">
        <a class="tag__link" href="https://gonzalo.f-v.es/tags/developer/">Developer</a>
    </li></ul>

 <div class="pagination">
  
    <a class="pagination__item" href="https://gonzalo.f-v.es/blog/2024-01-04-timeout-clusterinfoupdatejob/">
        <span class="pagination__label">Previous Post</span>
        <span class="pagination__title">Fix timeout in ClusterInfoUpdateJob</span>
    </a>
  

  
    <a class="pagination__item" href="https://gonzalo.f-v.es/blog/2024-12-14-mental-model-vagrant-hyperv-wsl/">
      <span class="pagination__label">Next Post</span>
      <span class="pagination__title" >My mental model for using Vagrant&#43;Hyper-V and WSL</span>
    </a>
  
</div>

          
          <footer class="post__footer">
            


<div class="social-icons">
  
     
    
      <a
        class="social-icons__link"
        title="Twitter"
        href="https://twitter.com/gonfva"
        target="_blank"
        rel="me noopener"
      >
        <div class="social-icons__icon" style="background-image: url('https://gonzalo.f-v.es/svg/twitter.svg')"></div>
      </a>
    
  
     
    
      <a
        class="social-icons__link"
        title="GitHub"
        href="https://github.com/gonfva"
        target="_blank"
        rel="me noopener"
      >
        <div class="social-icons__icon" style="background-image: url('https://gonzalo.f-v.es/svg/github.svg')"></div>
      </a>
    
  
     
    
      <a
        class="social-icons__link"
        title="LinkedIn"
        href="https://www.linkedin.com/in/gonzalofernandezvictorio/"
        target="_blank"
        rel="me noopener"
      >
        <div class="social-icons__icon" style="background-image: url('https://gonzalo.f-v.es/svg/linkedin.svg')"></div>
      </a>
    
     
</div>

            <p>© Gonzalo Fernandez-Victorio 2024</p>
          </footer>
          </div>
      </div>
      
    </div>


  </main>

   

  
  <script src="/js/index.min.301a8b0870381bf76b3b5182e8966d363a0474281183439beb024d8b8228fc66.js" integrity="sha256-MBqLCHA4G/drO1GC6JZtNjoEdCgRg0Ob6wJNi4Io/GY=" crossorigin="anonymous"></script>
  
  
  <script src="https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js"></script>

  
  <script src="https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js"
    data-autoloader-path="https://unpkg.com/prismjs@1.20.0/components/"></script>

  


</body>

</html>
